-- import to SQLite by running: sqlite3.exe db.sqlite3 -init sqlite.sql

PRAGMA journal_mode = MEMORY;
PRAGMA synchronous = OFF;
PRAGMA foreign_keys = OFF;
PRAGMA ignore_check_constraints = OFF;
PRAGMA auto_vacuum = NONE;
PRAGMA secure_delete = OFF;
BEGIN TRANSACTION;


CREATE TABLE `message`
(
`messageID`        TEXT NOT NULL ,
`sender`           TEXT NOT NULL ,
`recipient`        TEXT NOT NULL ,
`messageContentID` TEXT NOT NULL ,
`timestamp`        timestamp NOT NULL ,
`read`             bit NOT NULL ,
`delivered`        bit NOT NULL ,
PRIMARY KEY (`messageID`),
FOREIGN KEY `FK_46` (`messageContentID`) REFERENCES `messageData` (`messageContentID`),
FOREIGN KEY `FK_58` (`recipient`) REFERENCES `user` (`userID`),
FOREIGN KEY `FK_61` (`sender`) REFERENCES `user` (`userID`)
);



CREATE INDEX `message_FK_46` ON `message` (`messageContentID`);
CREATE INDEX `message_FK_58` ON `message` (`recipient`);
CREATE INDEX `message_FK_61` ON `message` (`sender`);

COMMIT;
PRAGMA ignore_check_constraints = ON;
PRAGMA foreign_keys = ON;
PRAGMA journal_mode = WAL;
PRAGMA synchronous = NORMAL;
